{% extends "base.html" %}
{% load kakera_tags wagtailcore_tags wagtailimages_tags wagtailembeds_tags %}

{% block og_extra %}
    <meta property="og:rich_attachment" content="true" />

    {% if page.cover_image %}
        {% image page.cover_image original as cover_image %}
        <meta property="og:image" content="{% absolute_media_url cover_image.url %}" />
        <meta property="og:image:width" content="{{ cover_image.width }}" />
        <meta property="og:image:height" content="{{ cover_image.height }}" />
    {% endif %}
{% endblock %}

{% block content %}
<div class="container" itemscope itemtype="http://schema.org/Article" itemprop="mainEntity">
    <link itemprop="mainEntityOfPage" href="{{ request.build_absolute_uri }}" />
    <article class="blog-box blog-post blog-page">
        <header class="post-header">
            <h1 class="post-title" itemprop="name headline">{{ page.title }}</h1>
        </header>

        {% if page.cover_image %}
        <section class="post-cover">
            {% image page.cover_image original itemprop="image" %}
        </section>
        {% endif %}

        <div itemprop="articleBody">
            {% for block in page.body %}
            <section class="block-{{ block.block_type }}">
                {% include_block block %}
            </section>
            {% endfor %}
        </div>
    </article>
</div>
{% endblock %}
